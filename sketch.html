<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etch-a-Sketch</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <button class="change-button">Change Pixel Density</button>
    <div class="container"></div>
    <button class="reset-button">Erase Board</button>

    <script>

        function generateGrid(dim) { 
            // generate 16 rows of divs, flexed vertically
            // inside each row, create 16 divs, flexed horizontally
            for (let i = 0; i < dim; i++) {
                const row = document.createElement("div");
                row.className = "vertical";

                for (let j = 0; j < dim; j++) {
                    const column = document.createElement("div");
                    column.className = "horizontal";
                    column.style["border"] = "1px solid black";
                    row.appendChild(column);
                }

                container.appendChild(row);
            }
        }

        function deleteGrid() {
            const containerChildren = document.querySelectorAll(".vertical");
            for (const child of containerChildren) {
                child.remove();
            }
        }
        
        const container = document.querySelector(".container");
        generateGrid(16);

        container.addEventListener("mouseover", (event) => {
            let target = event.target;

            if (!target.dataset.alpha) {
                target.dataset.alpha = 0;
            }
            const nextAlpha = Math.min(1, (parseFloat(target.dataset.alpha || "0") + 0.2));
            target.dataset.alpha = nextAlpha.toFixed(1);
            target.style.backgroundColor = `rgba(0, 0, 0, ${nextAlpha})`;
            })

        let dim = 16;
        const changeButton = document.querySelector(".change-button");
        changeButton.addEventListener("click", () => {
            dim = parseInt(prompt("Enter the number of squares per length (max 100)"));
            if (dim > 100) {
                alert("Error! Dimensions cannot be greater than 100x100.");
                return;
            }

            deleteGrid();
            generateGrid(dim);
        })

        const resetButton = document.querySelector(".reset-button");
        resetButton.addEventListener("click", () => {
            deleteGrid();
            generateGrid(dim);
        })
        
    </script>
</body>
</html>